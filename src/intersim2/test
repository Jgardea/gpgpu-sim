injection_rate = 0.1;

//////////  Flow control ////////////

num_vcs     = 16; // 4 vc channels per layer are needed to ensure the traffic of all types of packets
vc_buf_size = 8;

read_request_begin_vc = 0;
read_request_end_vc = 3;
write_request_begin_vc = 4;
write_request_end_vc = 7;
read_reply_begin_vc = 8;
read_reply_end_vc = 11;
write_reply_begin_vc = 12;
write_reply_end_vc = 15;

wait_for_tail_credit = 0;
vc_busy_when_full = 1;

channel_latency = 1;

//zxy_reply = zxy;
reply_rf = xyz;

/////////////// Router /////////////

speculative = 0;

vc_allocator = islip; 
sw_allocator = islip;
alloc_iters  = 1;

credit_delay   = 1;
routing_delay  = 0;  // means lookahead routing
vc_alloc_delay = 1;
sw_alloc_delay = 1;
st_final_delay = 1;

verc_arb_delay = 0; // jgardea 0 because verical arbitration is part of switch allocation right now

input_speedup     = 1;
output_speedup    = 1;
internal_speedup  = 1.0;

///////////////  Traffic //////////////

traffic = hotspot({pattern,0}); 
//traffic = uniform;

restrict_sources = 1; // Only to use with hotspot traffic pattern

injection_rate_uses_flits = 0;

use_read_write = 1;

write_fraction = 0.3;

read_request_size  = 1;
write_reply_size   = 1;
write_request_size = 5; 
read_reply_size    = 5; 

packet_size = 5;

flit_size = 256;
asym_flit_size = 192;

//////////////  Stats /////////////////

//print_activity = 1;
//viewer_trace = 1;
// watch_out = "-";

///////////// Network /////////////////

router=iq3d; // iq3d for vb-3dmesh
//router=iq;

topology = mesh3D;
k  = 4;
n  = 4;
s  = 4;

subnets = 1;
//subnets = 2;
//subnets = 4;
subnet_selection = 1;       // 1 = RR; 2 = random; 3 = by packet size

////////////// Routing ///////////////

routing_function = dor; //routefunc = topology + routing_function

//////////// Simulation /////////////////

sim_type = latency;

warmup_periods = 1;
sample_period  = 1000;
sim_count          = 1;
max_samples = 3;

latency_thres = 500.0;
warmup_thres = 0.05;
seed = 0; // random seed

////////// DSENT ///////////////////
dsent_config_file = dsent/electrical-mesh.cfg;
